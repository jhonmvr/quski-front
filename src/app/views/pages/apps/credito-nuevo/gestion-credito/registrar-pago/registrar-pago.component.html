<re-portlet>
    <re-portlet-header [title]="'Registrar Pagos'" [class]="'kt-portlet__head--lg'">
    </re-portlet-header>
    <re-portlet-body>
        <mat-vertical-stepper>
            <mat-step label="Información de Crédito">
                <div class="row">
                    <div class="col-md-2">
                        <label style="font-weight:bold">Nombre del cliente:</label>
                    </div>
                    <div class="col-md-4">
                        <mat-form-field class="example-full-width">
                            <input matInput [formControl]="nombreCliente" required>
                            <mat-error>{{ getErrorMessage("nombreCliente") }}</mat-error>
                        </mat-form-field>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-2">
                        <label style="font-weight:bold">Cédula:</label>
                    </div>
                    <div class="col-md-4">
                        <mat-form-field class="example-full-width">
                            <input matInput [formControl]="cedula" required>
                            <mat-error>{{ getErrorMessage("cedula") }}</mat-error>
                        </mat-form-field>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-2">
                        <label style="font-weight:bold">Código de Operación:</label>
                    </div>
                    <div class="col-md-4">
                        <mat-form-field class="example-full-width">
                            <input matInput [formControl]="codigoOperacion" required>
                            <mat-error>{{ getErrorMessage("codigoOperacion") }}</mat-error>
                        </mat-form-field>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-2">
                        <label style="font-weight:bold">Código cuenta Mupi:</label>
                    </div>
                    <div class="col-md-4">
                        <mat-form-field class="example-full-width">
                            <input matInput [formControl]="codigoCuentaMupi" required>
                            <mat-error>{{ getErrorMessage("codigoCuentaMupi") }}</mat-error>
                        </mat-form-field>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-2">
                        <label style="font-weight:bold">Tipo de crédito:</label>
                    </div>
                    <div class="col-md-4">
                        <mat-form-field class="example-full-width">
                            <input matInput [formControl]="tipoCredito" required>
                            <mat-error>{{ getErrorMessage("tipoCredito") }}</mat-error>
                        </mat-form-field>
                    </div>
                </div>
            </mat-step>
            <!-- DIA DE PAGO-->
            <mat-step label="Día de pago">
                <div class="mat-table__wrapper">
                    <table mat-table class="mat-elevation-z20" #tabla [dataSource]=" dataSourceRubros">
                        <ng-container matColumnDef="rubro">
                            <th mat-header-cell *matHeaderCellDef> Rubros </th>
                            <td mat-cell *matCellDef="let articulo"> {{articulo.rubro}} </td>
                        </ng-container>
                        <ng-container matColumnDef="valor">
                            <th mat-header-cell *matHeaderCellDef> Valor </th>
                            <td mat-cell *matCellDef="let articulo"> {{articulo.proyectado}} </td>
                        </ng-container>
                        <tr mat-header-row *matHeaderRowDef="columna"></tr>
                        <tr mat-row *matRowDef="let row; columns: columna;"></tr>
                    </table>
                </div>
            </mat-step>
            <!-- Tabla de pagos -->
            <mat-step label="Pagos">
                <table mat-table [dataSource]=" dataSource" class="mat-elevation-z8" #tabla1>

                    <ng-container matColumnDef="accion">
                        <th mat-header-cell *matHeaderCellDef>Accion </th>
                        <td mat-cell *matCellDef="let j">
                            <button mat-icon-button  (click)="deletFila(j)">
                                <mat-icon style="font-size: 62px" matTooltipPosition="above" matTooltip="Eliminar">cancel
                                </mat-icon>
                            </button>
                        </td>
                    </ng-container>

                    <ng-container matColumnDef="institucionFinanciera">
                        <th mat-header-cell *matHeaderCellDef> Institucion Financiera </th>
                        <td mat-cell *matCellDef="let articulo"> {{articulo.institucionFinanciera}} </td>
                    </ng-container>

                    <ng-container matColumnDef="cuentas">
                        <th mat-header-cell *matHeaderCellDef> Cuentas </th>
                        <td mat-cell *matCellDef="let articulo"> {{articulo.cuentas}} </td>
                    </ng-container>

                    <ng-container matColumnDef="fechaPago">
                        <th mat-header-cell *matHeaderCellDef> Fecha Pago </th>
                        <td mat-cell *matCellDef="let articulo"> {{articulo.fechaPago | date:'dd/MM/yyyy' }} </td>
                    </ng-container>

                    <ng-container matColumnDef="numeroDeposito">
                        <th mat-header-cell *matHeaderCellDef> Numero de deposito </th>
                        <td mat-cell *matCellDef="let articulo"> {{articulo.numeroDeposito}} </td>
                    </ng-container>

                    <ng-container matColumnDef="valorPagado">
                        <th mat-header-cell *matHeaderCellDef> Valor Depositado </th>
                        <td mat-cell *matCellDef="let articulo"> {{articulo.valorPagado}} </td>
                    </ng-container>
                    <ng-container matColumnDef="subir">
                        <th mat-header-cell *matHeaderCellDef> Subir Comprobante </th>
                        <td mat-cell *matCellDef="let j;">
                                <button type="submit" mat-icon-button focusable="false" (click)="subirComprobante(j)">
                                    <mat-icon style="font-size: 42px" matTooltipPosition="above"
                                        matTooltip="Subir Comprobante">cloud_upload</mat-icon>
                                </button>
                        </td>
                    </ng-container>

                    <ng-container matColumnDef="descargar">
                        <th mat-header-cell *matHeaderCellDef> Descarga Comprobante </th>
                        <td mat-cell *matCellDef="let j;">
                            <button mat-icon-button focusable="false" (click)="descargarComprobante()">
                                <mat-icon style="font-size: 42px" matTooltipPosition="above"
                                    matTooltip="Descarga Comprobante">cloud_download</mat-icon>
                            </button>
                        </td>
                    </ng-container>

                    <tr mat-header-row *matHeaderRowDef="columnas"></tr>
                    <tr mat-row *matRowDef="let row; columns: columnas;"></tr>
                </table>

                <div class="row mb-5">
                    <div class="col-md-4">
                        <button mat-raised-button color="white" focusable="false" (click)="cargarPagos()">
                            Agregar Pago
                        </button>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-1.5">

                        <label style="font-weight:bold">Valor Pre-cancelacion: </label>
                    </div>
                    <div class="col-md-2">
                        <mat-form-field>
                            <input matInput [formControl]="valorPreCancelado" required>
                        </mat-form-field>
                    </div>
                    <div class="col-md-1.5">

                        <label style="font-weight:bold">Valor Depositado: </label>
                    </div>
                    <div class="col-md-2">
                        <mat-form-field>
                            <input matInput [formControl]="valorDepositado" required>
                        </mat-form-field>
                    </div>
                </div>

                <label style="font-weight:bold"> Obsevaciones </label>
                <div class="col-md-8">
                    <mat-form-field class="example-full-width" color="black">
                        <input matInput [formControl]="observacion">
                        <input matInput type="text">
                    </mat-form-field>
                </div>

                <div>
                    <button mat-raised-button color="white" focusable="false" (click)="guardar()">
                        Solicitar Aprobación
                    </button>
                </div>
            </mat-step>
        </mat-vertical-stepper>
    </re-portlet-body>